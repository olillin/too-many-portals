execute positioned ~-1 ~ ~ facing ~-1 ~ ~ run function too_many_portals:raycast/start
execute if data storage too_many_portals {Activation:"vanilla"} at @e[type=marker,tag=too_many_portals.ray] positioned ~1 ~ ~ run function too_many_portals:check/floor/vanilla
execute if data storage too_many_portals {Activation:"water"} at @e[type=marker,tag=too_many_portals.ray] positioned ~1 ~ ~ run function too_many_portals:check/floor/water
execute if data storage too_many_portals {Activation:"lava"} at @e[type=marker,tag=too_many_portals.ray] positioned ~1 ~ ~ run function too_many_portals:check/floor/lava